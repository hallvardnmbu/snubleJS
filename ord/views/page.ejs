<!doctype html>
<html lang="nb">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Dagens ord</title>
        <link rel="stylesheet" href="/style.css" />
        <link rel="icon" href="data:,dagsord.no">
    </head>
    <body>
        <header>
          <% if (day && week && date) { %>
            <div><%= day.charAt(0).toUpperCase() + day.slice(1) %></div>
            <div>•</div>
            <div>Uke <%= week %></div>
            <div>•</div>
            <div><%= date %></div>
          <% } else if (day) { %>
            <div>Søkte etter <b><%= day %></b>.</div>
          <% } else { %>
            <div></div>
          <% } %>
        </header>

        <main id="words">
            <% if (words && words.length > 0) { %>
                <% words.forEach(function(item) { %>

                  <% if (day && week && date) { %>
                    <div class="heading">Dagens ord: <b><%= item.word %></b>.</div>
                  <% } else if (day) { %>
                    <div class="heading">Fant ord: <b><%= item.word %></b>.</div>
                  <% } else { %>
                    <div class="heading">Tilfeldig ord: <b><%= item.word %></b>.</div>
                  <% } %>

                  <% for (const dict of dictionary.split(',')) { %>
                    <%- include('partials/word', { item: item, dictionary: dict, both: dictionary.includes(',') }) %>
                  <% } %>

                <% }); %>
            <% } else if (error) { %>
                <section>
                    <div class="heading">Noe gikk galt: <%= error %></div>
                </section>
            <% } else { %>
                <section>
                  <div class="heading">Fant ikke dette ordet i databasen.</div>
                </section>
            <% } %>
        </main>

        <div class="find">
          <form action="/" method="get">
            <input type="hidden" name="dictionary" value="<%= dictionary || 'bm' %>">
            <button type="submit">dagens ord</button>
          </form>

          <form action="/" method="get">
            <select name="dictionary" onchange="this.form.submit()">
              <option value="bm" <%= dictionary === 'bm' ? 'selected' : '' %>>bokmål</option>
              <option value="nn" <%= dictionary === 'nn' ? 'selected' : '' %>>nynorsk</option>
              <option value="bm,nn" <%= dictionary === 'bm,nn' ? 'selected' : '' %>>begge</option>
            </select>
          </form>

          <form action="/search" method="get">
            <input type="hidden" name="dictionary" value="<%= dictionary || 'bm' %>">
            <input type="text" name="word" placeholder="ord" />
            <button type="submit">søk</button>
          </form>

          <form action="/random" method="get">
            <input type="hidden" name="dictionary" value="<%= dictionary || 'bm' %>">
            <button type="submit">tilfeldig</button>
          </form>
        </div>

        <footer>
          <div class="copyright">
              (C)
              <div class="names">
                  <div><a href="https://dilettant.no" target="_blank" style="color: var(--black)">Hallvard H. Lavik</a></div>
              </div>
          </div>
          <a href="https://github.com/hallvardnmbu/ord" target="_blank">Kildekode</a>
        </footer>
    </body>
</html>
